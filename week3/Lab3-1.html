<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8"/>
    <meta name="description" content="Data Visualisation Exercise 1"/>
    <meta name="keywords" content="HTML, CSS"/>
    <meta name="author" content="Your name here"/>

    <title>LAB 3.1 D3 Scaling your Charts</title>
    <!--Insert description of exercise  -->
    <script src="https://d3js.org/d3.v7.min.js"></script>


</head>

<body>
<ul>
    <li>
        <a href="../index.html">HOME</a>
    </li>
    <li>
        <a href="Lab2-1.html">Lab2-1</a>
    </li>
    <li>
        <a href="Lab2-2.html">Lab2-2</a>
    </li>
    <li>
        <a href="Lab2-4.html">Lab2-4</a>
    </li>
    <li>
        <a href="Lab2-4-question.html">Lab2-4-question</a>
    </li>
</ul>

<h1>LAB 3.1 D3 Scaling your Charts</h1>
<h2>Wang Chong</h2>
<div id="test">

</div>


<footer>COS30045 Data Visualisation</footer>

<script>


    let width = 1000;
    let height = 500;

    var dataSet = [
        [300, 200],
        [482, 400],
        [32, 34],
        [66, 372],
        [333, 14],
        [77, 384],
        [138, 200],
        [443, 223],
        [32, 238],
        [438, 77],
        [113, 23],
    ]

    var xScale = d3.scaleLinear().domain([d3.min(dataSet, function (d) {
        console.log(d)
        return d[0]
    }), d3.max(dataSet, function (d) {
        return d[0]
    })]).range([50, width - 50])


    var yScale = d3.scaleLinear().domain([d3.min(dataSet, function (d) {
        console.log(d)
        return d[1]
    }), d3.max(dataSet, function (d) {
        return d[1]
    })]).range([height - 50, 50]);


    var svg = d3.select("#test").append("svg").attr("width", width).attr("height", height).style("border", "1px green solid")
    svg.selectAll("circle").data(dataSet).enter().append("circle")
        .attr("cx", function (d, i) {
            return xScale(d[0]);
        }).attr("cy", function (d, i) {
        return yScale(d[1]);
    }).attr("r", 5)
        .attr("fill", "slategrey");


    svg.selectAll("text").data(dataSet).enter().append("text").text(function (d) {
        return d[0] + ",\t" + d[1];
    }).attr("x", function (d, i) {
        // 确保数据居中
        return xScale(d[0]) - 30;  // 使用 xScale 缩放后的 x 值
    })
        .attr("y", function (d) {
            return yScale(d[1]) + 40;
        });


</script>
</body>
</html>
